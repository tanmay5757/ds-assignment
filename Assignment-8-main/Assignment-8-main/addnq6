#include <bits/stdc++.h>
using namespace std;

struct Node{
    int data;
    Node* left;
    Node* right;
    Node(int x){
        data = x;
        left = right = NULL;
    }
};

int findPos(vector<int> &in, int x){
    for(int i=0;i<in.size();i++)
        if(in[i] == x) return i;
    return -1;
}

Node* buildTree(vector<int> &in, vector<int> &post, int &idx, int l, int r){
    if(l > r) return NULL;

    Node* root = new Node(post[idx--]);

    if(l == r) return root;

    int pos = findPos(in, root->data);

    root->right = buildTree(in, post, idx, pos+1, r);
    root->left  = buildTree(in, post, idx, l, pos-1);

    return root;
}

int main(){
    vector<int> inorder = {4,2,5,1,3};
    vector<int> postorder = {4,5,2,3,1};

    int idx = postorder.size()-1;
    Node* root = buildTree(inorder, postorder, idx, 0, inorder.size()-1);

    // print inorder to verify
    function<void(Node*)> ino = [&](Node* r){
        if(!r) return;
        ino(r->left);
        cout << r->data << " ";
        ino(r->right);
    };
    ino(root);
}
